{"version":3,"file":"..\\client\\_public\\javascripts\\app.js","sources":["app/application.coffee","app/collections/search_results.coffee","app/lib/base_view.coffee","app/lib/noaccent.coffee","app/lib/view_collection.coffee","app/models/base.coffee","app/models/date.coffee","app/models/geo.coffee","app/models/value.coffee","app/router.coffee","app/templates/card.jade","app/templates/home.jade","app/templates/search.jade","app/views/card.coffee","app/views/home.coffee","app/views/search.coffee","app/views/search_results.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxHA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnVA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/GA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3FA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5BA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3DA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzIA;;A","sourcesContent":["var Router, SearchView, app;\n\nRouter = require('./router');\n\nSearchView = require('./views/search');\n\nmodule.exports = app = {\n  initialize: function() {\n    window.app = this;\n    Date.setLocale('fr');\n    Router = require('router');\n    this.router = new Router();\n    this.header = new SearchView().render();\n    $('body').empty().append(this.header.$el);\n    return Backbone.history.start();\n  }\n};\n\n$(function() {\n  return app.initialize();\n});\n","var BaseModel, DateModel, GeoModel, SearchCollection, ValueModel, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseModel = require('../models/base');\n\nDateModel = require('../models/date');\n\nValueModel = require('../models/value');\n\nGeoModel = require('../models/geo');\n\nmodule.exports = SearchCollection = (function(_super) {\n  __extends(SearchCollection, _super);\n\n  function SearchCollection() {\n    _ref = SearchCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  SearchCollection.prototype.model = BaseModel;\n\n  SearchCollection.prototype.links = {};\n\n  SearchCollection.prototype.initialize = function(items, options) {\n    if (options.around) {\n      this.fetch({\n        reset: true,\n        url: \"semantic/around?id=\" + options.around\n      });\n    }\n    if (options.query) {\n      return this.fetch({\n        reset: true,\n        url: \"semantic/nlp?query=\" + encodeURIComponent(options.query)\n      });\n    }\n  };\n\n  SearchCollection.prototype.getPlacementInfo = function(id) {\n    var links, model;\n\n    model = this.get;\n    return links = this.links[id].map(function(otherId) {\n      return this.get(otherId);\n    });\n  };\n\n  SearchCollection.prototype.addLink = function(s, o) {\n    var _base, _base1, _name, _name1, _ref1, _ref2;\n\n    ((_ref1 = (_base = this.links)[_name = s.id]) != null ? _ref1 : _base[_name] = []).push(o.id);\n    return ((_ref2 = (_base1 = this.links)[_name1 = o.id]) != null ? _ref2 : _base1[_name1] = []).push(s.id);\n  };\n\n  SearchCollection.prototype.parse = function(data) {\n    var date, dict, hour, id, lat, links, long, match, model, models, node, token, _i, _len, _ref1, _ref2, _ref3;\n\n    models = [];\n    links = [];\n    _ref1 = data.semantic;\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      match = _ref1[_i];\n      dict = {};\n      for (token in match) {\n        node = match[token];\n        model = null;\n        if ((node != null ? node.token : void 0) === 'uri') {\n          id = node.value.replace('https://my.cozy.io/', '');\n          if (id.substr(0, 8) === 'instant/') {\n            _ref2 = id.substr(8).split('T'), date = _ref2[0], hour = _ref2[1];\n            hour = hour.replace(/-/g, ':');\n            models.push(model = new DateModel(date + 'T' + hour));\n          } else if (id.substr(0, 9) === 'position/') {\n            _ref3 = id.substr(9).split('-').map(parseFloat), lat = _ref3[0], long = _ref3[1];\n            models.push(model = new GeoModel(lat, long));\n            dict[token] = model.id = id;\n          } else if (id.substr(0, 4) === 'tel:') {\n            models.push(model = new BaseModel({\n              title: id.substr(4)\n            }));\n            dict[token] = model.id = id.substr(4);\n          } else if (id.substr(0, 7) === 'mailto:') {\n            models.push(model = new BaseModel({\n              title: id.substr(7)\n            }));\n            dict[token] = model.id = id.substr(7);\n          } else {\n            models.push(model = new BaseModel(data.docs[id]));\n            dict[token] = model.id;\n          }\n          dict[token] = model.id = id;\n        } else if ((node != null ? node.token : void 0) === 'literal') {\n          models.push(model = new ValueModel(node.value));\n          dict[token] = model.id;\n        }\n      }\n      links = links.concat(data.links.map(function(l) {\n        return {\n          s: dict[l.s],\n          o: dict[l.o]\n        };\n      }).filter(function(l) {\n        return l.s && l.o;\n      }));\n    }\n    console.log(links);\n    if (data.semantic.length === 0) {\n      models.push(new BaseModel({\n        docType: 'error',\n        error: 'No results'\n      }));\n    }\n    this.links = links;\n    return models;\n  };\n\n  return SearchCollection;\n\n})(Backbone.Collection);\n","var BaseView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BaseView = (function(_super) {\n  __extends(BaseView, _super);\n\n  function BaseView() {\n    _ref = BaseView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BaseView.prototype.template = function() {};\n\n  BaseView.prototype.initialize = function() {};\n\n  BaseView.prototype.getRenderData = function() {\n    var _ref1;\n\n    return {\n      model: (_ref1 = this.model) != null ? _ref1.toJSON() : void 0\n    };\n  };\n\n  BaseView.prototype.render = function() {\n    this.beforeRender();\n    this.$el.html(this.template(this.getRenderData()));\n    this.afterRender();\n    return this;\n  };\n\n  BaseView.prototype.beforeRender = function() {};\n\n  BaseView.prototype.afterRender = function() {};\n\n  BaseView.prototype.destroy = function() {\n    this.undelegateEvents();\n    this.$el.removeData().unbind();\n    this.remove();\n    return Backbone.View.prototype.remove.call(this);\n  };\n\n  return BaseView;\n\n})(Backbone.View);\n","var DAMAP;\n\nDAMAP = {\n  'À': 'A',\n  'Á': 'A',\n  'Â': 'A',\n  'Ã': 'A',\n  'Ä': 'A',\n  'Å': 'A',\n  'Æ': 'AE',\n  'Ç': 'C',\n  'È': 'E',\n  'É': 'E',\n  'Ê': 'E',\n  'Ë': 'E',\n  'Ì': 'I',\n  'Í': 'I',\n  'Î': 'I',\n  'Ï': 'I',\n  'Ð': 'D',\n  'Ñ': 'N',\n  'Ò': 'O',\n  'Ó': 'O',\n  'Ô': 'O',\n  'Õ': 'O',\n  'Ö': 'O',\n  'Ő': 'O',\n  'Ø': 'O',\n  'Ù': 'U',\n  'Ú': 'U',\n  'Û': 'U',\n  'Ü': 'U',\n  'Ű': 'U',\n  'Ý': 'Y',\n  'Þ': 'TH',\n  'ß': 'ss',\n  'à': 'a',\n  'á': 'a',\n  'â': 'a',\n  'ã': 'a',\n  'ä': 'a',\n  'å': 'a',\n  'æ': 'ae',\n  'ç': 'c',\n  'è': 'e',\n  'é': 'e',\n  'ê': 'e',\n  'ë': 'e',\n  'ì': 'i',\n  'í': 'i',\n  'î': 'i',\n  'ï': 'i',\n  'ð': 'd',\n  'ñ': 'n',\n  'ò': 'o',\n  'ó': 'o',\n  'ô': 'o',\n  'õ': 'o',\n  'ö': 'o',\n  'ő': 'o',\n  'ø': 'o',\n  'ù': 'u',\n  'ú': 'u',\n  'û': 'u',\n  'ü': 'u',\n  'ű': 'u',\n  'ý': 'y',\n  'þ': 'th',\n  'ÿ': 'y',\n  'ẞ': 'SS',\n  'α': 'a',\n  'β': 'b',\n  'γ': 'g',\n  'δ': 'd',\n  'ε': 'e',\n  'ζ': 'z',\n  'η': 'h',\n  'θ': '8',\n  'ι': 'i',\n  'κ': 'k',\n  'λ': 'l',\n  'μ': 'm',\n  'ν': 'n',\n  'ξ': '3',\n  'ο': 'o',\n  'π': 'p',\n  'ρ': 'r',\n  'σ': 's',\n  'τ': 't',\n  'υ': 'y',\n  'φ': 'f',\n  'χ': 'x',\n  'ψ': 'ps',\n  'ω': 'w',\n  'ά': 'a',\n  'έ': 'e',\n  'ί': 'i',\n  'ό': 'o',\n  'ύ': 'y',\n  'ή': 'h',\n  'ώ': 'w',\n  'ς': 's',\n  'ϊ': 'i',\n  'ΰ': 'y',\n  'ϋ': 'y',\n  'ΐ': 'i',\n  'Α': 'A',\n  'Β': 'B',\n  'Γ': 'G',\n  'Δ': 'D',\n  'Ε': 'E',\n  'Ζ': 'Z',\n  'Η': 'H',\n  'Θ': '8',\n  'Ι': 'I',\n  'Κ': 'K',\n  'Λ': 'L',\n  'Μ': 'M',\n  'Ν': 'N',\n  'Ξ': '3',\n  'Ο': 'O',\n  'Π': 'P',\n  'Ρ': 'R',\n  'Σ': 'S',\n  'Τ': 'T',\n  'Υ': 'Y',\n  'Φ': 'F',\n  'Χ': 'X',\n  'Ψ': 'PS',\n  'Ω': 'W',\n  'Ά': 'A',\n  'Έ': 'E',\n  'Ί': 'I',\n  'Ό': 'O',\n  'Ύ': 'Y',\n  'Ή': 'H',\n  'Ώ': 'W',\n  'Ϊ': 'I',\n  'Ϋ': 'Y',\n  'ş': 's',\n  'Ş': 'S',\n  'ı': 'i',\n  'İ': 'I',\n  'ğ': 'g',\n  'Ğ': 'G',\n  'а': 'a',\n  'б': 'b',\n  'в': 'v',\n  'г': 'g',\n  'д': 'd',\n  'е': 'e',\n  'ё': 'yo',\n  'ж': 'zh',\n  'з': 'z',\n  'и': 'i',\n  'й': 'j',\n  'к': 'k',\n  'л': 'l',\n  'м': 'm',\n  'н': 'n',\n  'о': 'o',\n  'п': 'p',\n  'р': 'r',\n  'с': 's',\n  'т': 't',\n  'у': 'u',\n  'ф': 'f',\n  'х': 'h',\n  'ц': 'c',\n  'ч': 'ch',\n  'ш': 'sh',\n  'щ': 'sh',\n  'ъ': 'u',\n  'ы': 'y',\n  'ь': '',\n  'э': 'e',\n  'ю': 'yu',\n  'я': 'ya',\n  'А': 'A',\n  'Б': 'B',\n  'В': 'V',\n  'Г': 'G',\n  'Д': 'D',\n  'Е': 'E',\n  'Ё': 'Yo',\n  'Ж': 'Zh',\n  'З': 'Z',\n  'И': 'I',\n  'Й': 'J',\n  'К': 'K',\n  'Л': 'L',\n  'М': 'M',\n  'Н': 'N',\n  'О': 'O',\n  'П': 'P',\n  'Р': 'R',\n  'С': 'S',\n  'Т': 'T',\n  'У': 'U',\n  'Ф': 'F',\n  'Х': 'H',\n  'Ц': 'C',\n  'Ч': 'Ch',\n  'Ш': 'Sh',\n  'Щ': 'Sh',\n  'Ъ': 'U',\n  'Ы': 'Y',\n  'Ь': '',\n  'Э': 'E',\n  'Ю': 'Yu',\n  'Я': 'Ya',\n  'Є': 'Ye',\n  'І': 'I',\n  'Ї': 'Yi',\n  'Ґ': 'G',\n  'є': 'ye',\n  'і': 'i',\n  'ї': 'yi',\n  'ґ': 'g',\n  'č': 'c',\n  'ď': 'd',\n  'ě': 'e',\n  'ň': 'n',\n  'ř': 'r',\n  'š': 's',\n  'ť': 't',\n  'ů': 'u',\n  'ž': 'z',\n  'Č': 'C',\n  'Ď': 'D',\n  'Ě': 'E',\n  'Ň': 'N',\n  'Ř': 'R',\n  'Š': 'S',\n  'Ť': 'T',\n  'Ů': 'U',\n  'Ž': 'Z',\n  'ą': 'a',\n  'ć': 'c',\n  'ę': 'e',\n  'ł': 'l',\n  'ń': 'n',\n  'ś': 's',\n  'ź': 'z',\n  'ż': 'z',\n  'Ą': 'A',\n  'Ć': 'C',\n  'Ę': 'e',\n  'Ł': 'L',\n  'Ń': 'N',\n  'Ś': 'S',\n  'Ź': 'Z',\n  'Ż': 'Z',\n  'ā': 'a',\n  'ē': 'e',\n  'ģ': 'g',\n  'ī': 'i',\n  'ķ': 'k',\n  'ļ': 'l',\n  'ņ': 'n',\n  'ū': 'u',\n  'Ā': 'A',\n  'Ē': 'E',\n  'Ģ': 'G',\n  'Ī': 'i',\n  'Ķ': 'k',\n  'Ļ': 'L',\n  'Ņ': 'N',\n  'Ū': 'u',\n  '€': 'euro',\n  '₢': 'cruzeiro',\n  '₣': 'french franc',\n  '£': 'pound',\n  '₤': 'lira',\n  '₥': 'mill',\n  '₦': 'naira',\n  '₧': 'peseta',\n  '₨': 'rupee',\n  '₩': 'won',\n  '₪': 'new shequel',\n  '₫': 'dong',\n  '₭': 'kip',\n  '₮': 'tugrik',\n  '₯': 'drachma',\n  '₰': 'penny',\n  '₱': 'peso',\n  '₲': 'guarani',\n  '₳': 'austral',\n  '₴': 'hryvnia',\n  '₵': 'cedi',\n  '¢': 'cent',\n  '¥': 'yen',\n  '元': 'yuan',\n  '円': 'yen',\n  '﷼': 'rial',\n  '₠': 'ecu',\n  '¤': 'currency',\n  '฿': 'baht',\n  \"$\": 'dollar',\n  '₹': 'indian rupee',\n  '©': '(c)',\n  'œ': 'oe',\n  'Œ': 'OE',\n  '∑': 'sum',\n  '®': '(r)',\n  '†': '+',\n  '“': '\"',\n  '”': '\"',\n  '‘': \"'\",\n  '’': \"'\",\n  '∂': 'd',\n  'ƒ': 'f',\n  '™': 'tm',\n  '℠': 'sm',\n  '…': '...',\n  '˚': 'o',\n  'º': 'o',\n  'ª': 'a',\n  '•': '*',\n  '∆': 'delta',\n  '∞': 'infinity',\n  '♥': 'love',\n  '&': 'and',\n  '|': 'or',\n  '<': 'less',\n  '>': 'greater'\n};\n\nmodule.exports = function(text) {\n  var char, i, replacement, result, _i, _ref;\n\n  result = '';\n  for (i = _i = 0, _ref = text.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n    char = text[i];\n    replacement = DAMAP[char];\n    result += replacement ? replacement : char;\n  }\n  return result;\n};\n","var BaseView, ViewCollection, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nmodule.exports = ViewCollection = (function(_super) {\n  __extends(ViewCollection, _super);\n\n  function ViewCollection() {\n    this.removeItem = __bind(this.removeItem, this);\n    this.addItem = __bind(this.addItem, this);    _ref = ViewCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  ViewCollection.prototype.itemview = null;\n\n  ViewCollection.prototype.views = {};\n\n  ViewCollection.prototype.template = function() {\n    return '';\n  };\n\n  ViewCollection.prototype.itemViewOptions = function() {};\n\n  ViewCollection.prototype.collectionEl = null;\n\n  ViewCollection.prototype.onChange = function() {\n    return this.$el.toggleClass('empty', _.size(this.views) === 0);\n  };\n\n  ViewCollection.prototype.appendView = function(view) {\n    return this.$collectionEl.append(view.el);\n  };\n\n  ViewCollection.prototype.initialize = function() {\n    ViewCollection.__super__.initialize.apply(this, arguments);\n    this.views = {};\n    this.listenTo(this.collection, \"reset\", this.onReset);\n    this.listenTo(this.collection, \"add\", this.addItem);\n    this.listenTo(this.collection, \"remove\", this.removeItem);\n    if (this.collectionEl == null) {\n      this.collectionEl = this.el;\n      return this.$collectionEl = this.$el;\n    }\n  };\n\n  ViewCollection.prototype.render = function() {\n    var id, view, _ref1;\n\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.$el.detach();\n    }\n    return ViewCollection.__super__.render.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.afterRender = function() {\n    var id, view, _ref1;\n\n    if (!this.$collectionEl) {\n      this.$collectionEl = this.$(this.collectionEl);\n    }\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      this.appendView(view);\n    }\n    this.onReset(this.collection);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.remove = function() {\n    this.onReset([]);\n    return ViewCollection.__super__.remove.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.onReset = function(newcollection) {\n    var id, view, _ref1;\n\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.remove();\n    }\n    return newcollection.forEach(this.addItem);\n  };\n\n  ViewCollection.prototype.addItem = function(model) {\n    var options, view;\n\n    options = _.extend({}, {\n      model: model\n    }, this.itemViewOptions(model));\n    view = new this.itemview(options);\n    this.views[model.cid] = view.render();\n    this.appendView(view);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.removeItem = function(model) {\n    this.views[model.cid].remove();\n    delete this.views[model.cid];\n    return this.onChange(this.views);\n  };\n\n  return ViewCollection;\n\n})(BaseView);\n","var BaseModel, formatDuration, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BaseModel = (function(_super) {\n  __extends(BaseModel, _super);\n\n  function BaseModel() {\n    _ref = BaseModel.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BaseModel.prototype.idAttribute = '_id';\n\n  BaseModel.prototype.getSummary = function() {\n    var date, direction, image, type, _ref1, _ref2;\n\n    switch ((_ref1 = this.get('docType')) != null ? _ref1.toLowerCase() : void 0) {\n      case 'contact':\n        image = ((_ref2 = this.get('_attachments')) != null ? _ref2.picture : void 0) ? \"images/contact/\" + (this.get('_id')) + \"/picture\" : 'img/contact.png';\n        return {\n          title: this.get('fn'),\n          image: image\n        };\n      case 'phonecommunicationlog':\n        date = Date.create(this.get('timestamp'));\n        direction = this.get('direction') === 'OUTGOING' ? 'sortant' : 'entrant';\n        if (this.get('type') === 'VOICE') {\n          type = 'Appel';\n          image = 'img/phonecalllog.png';\n        } else {\n          type = 'SMS';\n          image = 'img/sms.png';\n        }\n        return {\n          title: type + ' ' + direction,\n          image: image,\n          content: formatDuration(this.get('chipCount'))\n        };\n      case 'bankoperation':\n        type = this.get('amount') < 0 ? 'Débit : ' : 'Crédit : ';\n        return {\n          title: this.get('title'),\n          image: 'img/bankoperation.png',\n          content: type + this.get('amount') + '€'\n        };\n      case 'receipt':\n        return {\n          title: 'Ticket de Caisse',\n          content: this.get('amount') + '€',\n          image: 'img/receipt.png'\n        };\n      case 'receiptdetail':\n        return {\n          title: this.get('label'),\n          content: this.get('price') + '€',\n          image: 'img/receipt.png'\n        };\n      case 'error':\n        return {\n          image: 'http://placehold.it/64&text=:(',\n          title: this.get('error') || 'Error'\n        };\n      default:\n        return {\n          image: 'img/idk.png',\n          title: this.get('title') || '???'\n        };\n    }\n  };\n\n  return BaseModel;\n\n})(Backbone.Model);\n\nformatDuration = function(seconds) {\n  var h, m, out, s;\n\n  seconds = parseInt(seconds);\n  s = seconds % 60;\n  m = ((seconds - s) % 3600) / 60;\n  h = (seconds - s - m * 60) / 3600;\n  out = s + 's';\n  if (m) {\n    out = m + 'min ' + out;\n  }\n  if (h) {\n    out = h + 'h ' + out;\n  }\n  return out;\n};\n","var DateModel,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = DateModel = (function(_super) {\n  __extends(DateModel, _super);\n\n  function DateModel(value) {\n    var date;\n\n    date = new Date(value);\n    DateModel.__super__.constructor.call(this, {\n      value: date,\n      id: date.format('long')\n    });\n  }\n\n  DateModel.prototype.getSummary = function() {\n    return {\n      title: this.get('value').format('short'),\n      image: 'img/date.png',\n      content: this.get('value').format('{HH}:{mm}')\n    };\n  };\n\n  return DateModel;\n\n})(Backbone.Model);\n","var DateModel,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = DateModel = (function(_super) {\n  __extends(DateModel, _super);\n\n  function DateModel(lat, long) {\n    DateModel.__super__.constructor.call(this, {\n      lat: lat,\n      long: long\n    });\n  }\n\n  DateModel.prototype.getSummary = function() {\n    return {\n      title: 'Position',\n      image: 'img/geo.png',\n      content: this.get('lat') + ';' + this.get('long')\n    };\n  };\n\n  return DateModel;\n\n})(Backbone.Model);\n","var DateModel,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = DateModel = (function(_super) {\n  __extends(DateModel, _super);\n\n  function DateModel(value) {\n    DateModel.__super__.constructor.call(this, {\n      value: value,\n      id: value\n    });\n  }\n\n  DateModel.prototype.getSummary = function() {\n    return {\n      title: this.get('value'),\n      image: 'img/date.png'\n    };\n  };\n\n  return DateModel;\n\n})(Backbone.Model);\n","var HomeView, Router, SearchResultView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nHomeView = require('./views/home');\n\nSearchResultView = require('./views/search_results');\n\nmodule.exports = Router = (function(_super) {\n  __extends(Router, _super);\n\n  function Router() {\n    _ref = Router.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Router.prototype.routes = {\n    '': 'home',\n    'search/*query': 'query',\n    'around/:id': 'around'\n  };\n\n  Router.prototype.home = function() {\n    app.header.setContent(\"\");\n    return this.displayView(new HomeView());\n  };\n\n  Router.prototype.query = function(search) {\n    app.header.setContent(decodeURIComponent(search));\n    return this.displayView(new SearchResultView({\n      query: search\n    }));\n  };\n\n  Router.prototype.around = function(id) {\n    app.header.setContent(\"A propos de \" + id);\n    return this.displayView(new SearchResultView({\n      around: id\n    }));\n  };\n\n  Router.prototype.displayView = function(view) {\n    if (this.mainView) {\n      this.mainView.remove();\n    }\n    $('body').append(view.$el);\n    return this.mainView = view.render();\n  };\n\n  return Router;\n\n})(Backbone.Router);\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"caption media\"><img');\nbuf.push(attrs({ 'src':(image), \"class\": ('media-object') + ' ' + ('pull-left') }, {\"src\":true}));\nbuf.push('/><h3 class=\"media-body\">');\nvar __val__ = title\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h3>');\nif ( content)\n{\nbuf.push('<p class=\"clearfix\">');\nvar __val__ = content\nbuf.push(null == __val__ ? \"\" : __val__);\nbuf.push('</p>');\n}\nbuf.push('</div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<h1>Bienvenue sur L\\'application SemSearch.</h1><p class=\"status\">Taper une question dans la barre ci-dessus</p><h2>Examples de requêtes</h2><ul class=\"samples\">');\n text = \"Qui ai-je appelé en mars ?\"\nbuf.push('<li><a');\nbuf.push(attrs({ 'href':(\"#search/\" + encodeURIComponent(text)) }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = '\"' + text + '\"'\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li>');\n text = \"Appels recu de Jeanette ?\"\nbuf.push('<li><a');\nbuf.push(attrs({ 'href':(\"#search/\" + encodeURIComponent(text)) }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = '\"' + text + '\"'\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li>');\n text = \"Mes courses d'octobre 2013 ?\"\nbuf.push('<li><a');\nbuf.push(attrs({ 'href':(\"#search/\" + encodeURIComponent(text)) }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = '\"' + text + '\"'\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li>');\n text = \"Mes appels a paris ?\"\nbuf.push('<li><a');\nbuf.push(attrs({ 'href':(\"#search/\" + encodeURIComponent(text)) }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = '\"' + text + '\"'\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li>');\n text = \"sms envoyés a pierre ?\"\nbuf.push('<li><a');\nbuf.push(attrs({ 'href':(\"#search/\" + encodeURIComponent(text)) }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = '\"' + text + '\"'\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li>');\n text = \"Virement recu de pierre ?\"\nbuf.push('<li><a');\nbuf.push(attrs({ 'href':(\"#search/\" + encodeURIComponent(text)) }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = '\"' + text + '\"'\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li></ul>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"container\"><div class=\"navbar-header\"><button type=\"button\" data-toggle=\"collapse\" data-target=\".navbar-collapse\" class=\"navbar-toggle\"><span class=\"icon-bar\"></span><span class=\"icon-bar\"></span><span class=\"icon-bar\"></span></button><a href=\"#\" class=\"navbar-brand\">SemSearch</a><a id=\"back-btn\" href=\"#\" class=\"navbar-brand\">Ecran précédent</a></div><div class=\"navbar-collapse collapse\"><form role=\"search\" ng-controller=\"SearchCtrl\" class=\"navbar-form navbar-left\"><input type=\"text\" placeholder=\"Rechercher\" class=\"input-large form-control\"/></form></div></div>');\n}\nreturn buf.join(\"\");\n};","var BaseView, CardView, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = CardView = (function(_super) {\n  __extends(CardView, _super);\n\n  function CardView() {\n    this.toggleSelected = __bind(this.toggleSelected, this);    _ref = CardView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  CardView.prototype.tagName = 'a';\n\n  CardView.prototype.className = 'card';\n\n  CardView.prototype.template = require('../templates/card');\n\n  CardView.prototype.events = {\n    'click ': 'toggleSelected'\n  };\n\n  CardView.prototype.getRenderData = function() {\n    return _.extend({\n      title: '',\n      content: ''\n    }, this.model.getSummary());\n  };\n\n  CardView.prototype.toggleSelected = function(event) {\n    var url;\n\n    if (this.model.get('_id')) {\n      return app.router.navigate('around/' + this.model.get('_id'), true);\n    } else if (this.model.get('lat')) {\n      url = \"http://www.openstreetmap.org/#map=19/\";\n      url += this.model.get('lat') + '/' + this.model.get('long');\n      return window.open(url, '_blank');\n    }\n  };\n\n  CardView.prototype.centerPos = function() {\n    var left, top, _ref1;\n\n    _ref1 = this.$el.position(), left = _ref1.left, top = _ref1.top;\n    left += this.$el.width() / 2;\n    top += this.$el.height() / 2;\n    return {\n      left: left,\n      top: top\n    };\n  };\n\n  return CardView;\n\n})(BaseView);\n","var BaseView, HomeView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = HomeView = (function(_super) {\n  __extends(HomeView, _super);\n\n  function HomeView() {\n    _ref = HomeView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  HomeView.prototype.className = 'jumbotron';\n\n  HomeView.prototype.template = require('../templates/home');\n\n  return HomeView;\n\n})(BaseView);\n","var BaseView, FolderView, noaccent, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nnoaccent = require('../lib/noaccent');\n\nmodule.exports = FolderView = (function(_super) {\n  __extends(FolderView, _super);\n\n  function FolderView() {\n    _ref = FolderView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  FolderView.prototype.className = 'navbar navbar-inverse navbar-fixed-top';\n\n  FolderView.prototype.template = require('../templates/search');\n\n  FolderView.prototype.events = {\n    'keydown input': 'onKeyDown',\n    'click #back-btn': 'back'\n  };\n\n  FolderView.prototype.setContent = function(text) {\n    return this.$('input').val(text);\n  };\n\n  FolderView.prototype.back = function(e) {\n    window.history.back();\n    return e.preventDefault();\n  };\n\n  FolderView.prototype.onKeyDown = function(event) {\n    var url;\n\n    if (event.which === 13) {\n      url = \"search/\" + encodeURIComponent(noaccent(this.$('input').val()));\n      return app.router.navigate(url, {\n        trigger: true\n      });\n    }\n  };\n\n  return FolderView;\n\n})(BaseView);\n","var SearchCollection, SearchResults, ViewCollection, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nViewCollection = require('../lib/view_collection');\n\nSearchCollection = require('../collections/search_results');\n\nmodule.exports = SearchResults = (function(_super) {\n  __extends(SearchResults, _super);\n\n  function SearchResults() {\n    _ref = SearchResults.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  SearchResults.prototype.id = 'result-view';\n\n  SearchResults.prototype.className = 'container-fluid';\n\n  SearchResults.prototype.counter = 0;\n\n  SearchResults.prototype.itemview = require('./card');\n\n  SearchResults.prototype.initialize = function(options) {\n    this.collection = new SearchCollection([], options);\n    this.collection.on('error', function() {\n      return alert('Reformulez votre requête.');\n    });\n    this.lines = this.createSVG('svg', {});\n    return SearchResults.__super__.initialize.apply(this, arguments);\n  };\n\n  SearchResults.prototype.createSVG = function(tagName, attr) {\n    var elem;\n\n    elem = window.document.createElementNS('http://www.w3.org/2000/svg', tagName);\n    return $(elem).attr(attr);\n  };\n\n  SearchResults.prototype.overlaps = function(top, left) {\n    var cid, v, view, _ref1;\n\n    _ref1 = this.views;\n    for (cid in _ref1) {\n      view = _ref1[cid];\n      v = view.$el.position();\n      if (Math.abs(v.left - left) + Math.abs(v.top - top) < 1) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  SearchResults.prototype.appendView = function(view) {\n    var left, links, top, views, _ref1,\n      _this = this;\n\n    links = this.collection.links.map(function(l) {\n      return {\n        s: _this.collection.get(l.s).cid,\n        o: _this.collection.get(l.o).cid\n      };\n    });\n    console.log(links);\n    links = links.filter(function(l) {\n      var _ref1;\n\n      return (_ref1 = view.model.cid) === l.s || _ref1 === l.o;\n    });\n    console.log(links);\n    links = links.map(function(l) {\n      if (l.s === view.model.cid) {\n        return l.o;\n      } else {\n        return l.s;\n      }\n    });\n    console.log(links);\n    views = links.map(function(cid) {\n      return _this.views[cid];\n    }).filter(function(x) {\n      return !!x;\n    });\n    console.log(views);\n    if (views.length) {\n      _ref1 = views[0].$el.position(), top = _ref1.top, left = _ref1.left;\n      left += 350;\n      while (this.overlaps(top, left)) {\n        top += 100;\n      }\n    } else {\n      left = 50;\n      top = this.maxTop + 100;\n    }\n    view.$el.css({\n      top: top,\n      left: left\n    });\n    if (top > this.maxTop) {\n      this.maxTop = top;\n    }\n    if (left > this.maxTop) {\n      this.maxLeft = left;\n    }\n    this.$el.height(this.maxTop + 500);\n    this.$el.width(this.maxLeft + 500);\n    this.lines.attr({\n      width: this.$el.width(),\n      height: this.$el.height()\n    });\n    this.$el.append(this.lines);\n    SearchResults.__super__.appendView.apply(this, arguments);\n    return views.forEach(function(linked) {\n      var a, b;\n\n      a = linked.centerPos();\n      b = view.centerPos();\n      return _this.lines.append(_this.createSVG('line', {\n        x1: a.left,\n        y1: a.top,\n        x2: b.left,\n        y2: b.top,\n        style: 'stroke:#ddd;stroke-width:2;'\n      }));\n    });\n  };\n\n  SearchResults.prototype.afterRender = function() {\n    this.maxTop = -50;\n    this.maxLeft = 0;\n    return SearchResults.__super__.afterRender.apply(this, arguments);\n  };\n\n  return SearchResults;\n\n})(ViewCollection);\n"]}