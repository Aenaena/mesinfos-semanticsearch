{"version":3,"file":"..\\client\\_public\\javascripts\\app.js","sources":["app/application.coffee","app/collections/search_results.coffee","app/lib/base_view.coffee","app/lib/view_collection.coffee","app/models/base.coffee","app/models/date.coffee","app/router.coffee","app/templates/card.jade","app/templates/home.jade","app/templates/search.jade","app/views/card.coffee","app/views/home.coffee","app/views/search.coffee","app/views/search_results.coffee"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7EA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/GA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/EA;;A","sourcesContent":["var Router, SearchView, app;\n\nRouter = require('./router');\n\nSearchView = require('./views/search');\n\nmodule.exports = app = {\n  initialize: function() {\n    window.app = this;\n    Date.setLocale('fr');\n    Router = require('router');\n    this.router = new Router();\n    this.header = new SearchView().render();\n    $('body').empty().append(this.header.$el);\n    return Backbone.history.start();\n  }\n};\n\n$(function() {\n  return app.initialize();\n});\n","var BaseModel, DateModel, SearchCollection, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseModel = require('../models/base');\n\nDateModel = require('../models/date');\n\nmodule.exports = SearchCollection = (function(_super) {\n  __extends(SearchCollection, _super);\n\n  function SearchCollection() {\n    _ref = SearchCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  SearchCollection.prototype.model = BaseModel;\n\n  SearchCollection.prototype.initialize = function(items, options) {\n    if (options.query) {\n      return this.fetch({\n        url: \"semantic/nlp?query=\" + encodeURIComponent(options.query)\n      });\n    }\n  };\n\n  SearchCollection.prototype.parse = function(data) {\n    var a, b, date, exist, hour, id, inGroup, link, match, models, node, token, _i, _j, _k, _len, _len1, _len2, _ref1, _ref2;\n\n    models = [];\n    this.links = [];\n    _ref1 = data.semantic;\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      match = _ref1[_i];\n      inGroup = [];\n      for (token in match) {\n        node = match[token];\n        if (node.token === 'uri') {\n          id = node.value.replace('https://my.cozy.io/', '');\n          if (id.substr(0, 8) === 'instant/') {\n            _ref2 = id.substr(8).split('T'), date = _ref2[0], hour = _ref2[1];\n            hour = hour.replace(/-/g, ':');\n            inGroup.push(new DateModel(date + 'T' + hour));\n          } else {\n            inGroup.push(new BaseModel(data.docs[id]));\n          }\n        }\n      }\n      for (_j = 0, _len1 = inGroup.length; _j < _len1; _j++) {\n        a = inGroup[_j];\n        for (_k = 0, _len2 = inGroup.length; _k < _len2; _k++) {\n          b = inGroup[_k];\n          if (!(a !== b)) {\n            continue;\n          }\n          link = {\n            s: a.cid,\n            o: b.cid\n          };\n          exist = _.findWhere(this.links, link) || _.findWhere(this.links, {\n            o: a.cid,\n            s: b.cid\n          });\n          console.log(link, exist);\n          if (!exist) {\n            this.links.push(link);\n          }\n        }\n      }\n      models = models.concat(inGroup);\n    }\n    return models;\n  };\n\n  return SearchCollection;\n\n})(Backbone.Collection);\n","var BaseView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BaseView = (function(_super) {\n  __extends(BaseView, _super);\n\n  function BaseView() {\n    _ref = BaseView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BaseView.prototype.template = function() {};\n\n  BaseView.prototype.initialize = function() {};\n\n  BaseView.prototype.getRenderData = function() {\n    var _ref1;\n\n    return {\n      model: (_ref1 = this.model) != null ? _ref1.toJSON() : void 0\n    };\n  };\n\n  BaseView.prototype.render = function() {\n    this.beforeRender();\n    this.$el.html(this.template(this.getRenderData()));\n    this.afterRender();\n    return this;\n  };\n\n  BaseView.prototype.beforeRender = function() {};\n\n  BaseView.prototype.afterRender = function() {};\n\n  BaseView.prototype.destroy = function() {\n    this.undelegateEvents();\n    this.$el.removeData().unbind();\n    this.remove();\n    return Backbone.View.prototype.remove.call(this);\n  };\n\n  return BaseView;\n\n})(Backbone.View);\n","var BaseView, ViewCollection, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nmodule.exports = ViewCollection = (function(_super) {\n  __extends(ViewCollection, _super);\n\n  function ViewCollection() {\n    this.removeItem = __bind(this.removeItem, this);\n    this.addItem = __bind(this.addItem, this);    _ref = ViewCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  ViewCollection.prototype.itemview = null;\n\n  ViewCollection.prototype.views = {};\n\n  ViewCollection.prototype.template = function() {\n    return '';\n  };\n\n  ViewCollection.prototype.itemViewOptions = function() {};\n\n  ViewCollection.prototype.collectionEl = null;\n\n  ViewCollection.prototype.onChange = function() {\n    return this.$el.toggleClass('empty', _.size(this.views) === 0);\n  };\n\n  ViewCollection.prototype.appendView = function(view) {\n    return this.$collectionEl.append(view.el);\n  };\n\n  ViewCollection.prototype.initialize = function() {\n    ViewCollection.__super__.initialize.apply(this, arguments);\n    this.views = {};\n    this.listenTo(this.collection, \"reset\", this.onReset);\n    this.listenTo(this.collection, \"add\", this.addItem);\n    this.listenTo(this.collection, \"remove\", this.removeItem);\n    if (this.collectionEl == null) {\n      this.collectionEl = this.el;\n      return this.$collectionEl = this.$el;\n    }\n  };\n\n  ViewCollection.prototype.render = function() {\n    var id, view, _ref1;\n\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.$el.detach();\n    }\n    return ViewCollection.__super__.render.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.afterRender = function() {\n    var id, view, _ref1;\n\n    if (!this.$collectionEl) {\n      this.$collectionEl = this.$(this.collectionEl);\n    }\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      this.appendView(view);\n    }\n    this.onReset(this.collection);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.remove = function() {\n    this.onReset([]);\n    return ViewCollection.__super__.remove.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.onReset = function(newcollection) {\n    var id, view, _ref1;\n\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.remove();\n    }\n    return newcollection.forEach(this.addItem);\n  };\n\n  ViewCollection.prototype.addItem = function(model) {\n    var options, view;\n\n    options = _.extend({}, {\n      model: model\n    }, this.itemViewOptions(model));\n    view = new this.itemview(options);\n    this.views[model.cid] = view.render();\n    this.appendView(view);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.removeItem = function(model) {\n    this.views[model.cid].remove();\n    delete this.views[model.cid];\n    return this.onChange(this.views);\n  };\n\n  return ViewCollection;\n\n})(BaseView);\n","var BaseModel, formatDuration, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BaseModel = (function(_super) {\n  __extends(BaseModel, _super);\n\n  function BaseModel() {\n    _ref = BaseModel.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BaseModel.prototype.getSummary = function() {\n    var date, direction, image, _ref1;\n\n    console.log(this.attributes);\n    switch (this.get('docType').toLowerCase()) {\n      case 'contact':\n        image = ((_ref1 = this.get('_attachments')) != null ? _ref1.picture : void 0) ? \"images/contact/\" + (this.get('_id')) + \"/picture\" : 'img/contact.png';\n        return {\n          title: this.get('fn'),\n          image: image\n        };\n      case 'phonecommunicationlog':\n        date = Date.create(this.get('timestamp'));\n        direction = this.get('direction') === 'OUTGOING' ? 'sortant' : 'entrant';\n        return {\n          title: 'Appel ' + direction,\n          image: 'img/phonecalllog.png',\n          content: formatDuration(this.get('chipCount'))\n        };\n    }\n  };\n\n  return BaseModel;\n\n})(Backbone.Model);\n\nformatDuration = function(seconds) {\n  var h, m, out, s;\n\n  seconds = parseInt(seconds);\n  s = seconds % 60;\n  m = ((seconds - s) % 3600) / 60;\n  h = (seconds - s - m * 60) / 3600;\n  out = s + 's';\n  if (m) {\n    out = m + 'min ' + out;\n  }\n  if (h) {\n    out = h + 'h ' + out;\n  }\n  return out;\n};\n","var DateModel,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = DateModel = (function(_super) {\n  __extends(DateModel, _super);\n\n  function DateModel(value) {\n    DateModel.__super__.constructor.call(this, {\n      value: new Date(value)\n    });\n  }\n\n  DateModel.prototype.getSummary = function() {\n    return {\n      title: this.get('value').format('short'),\n      image: 'img/date.png',\n      content: this.get('value').format('{HH}:{mm}')\n    };\n  };\n\n  return DateModel;\n\n})(Backbone.Model);\n","var HomeView, Router, SearchResultView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nHomeView = require('./views/home');\n\nSearchResultView = require('./views/search_results');\n\nmodule.exports = Router = (function(_super) {\n  __extends(Router, _super);\n\n  function Router() {\n    _ref = Router.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Router.prototype.routes = {\n    '': 'home',\n    'search/*query': 'query'\n  };\n\n  Router.prototype.home = function() {\n    app.header.setContent(\"\");\n    return this.displayView(new HomeView());\n  };\n\n  Router.prototype.query = function(search) {\n    app.header.setContent(decodeURIComponent(search));\n    return this.displayView(new SearchResultView({\n      query: search\n    }));\n  };\n\n  Router.prototype.displayView = function(view) {\n    if (this.mainView) {\n      this.mainView.remove();\n    }\n    $('body').append(view.$el);\n    return this.mainView = view.render();\n  };\n\n  return Router;\n\n})(Backbone.Router);\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"caption media\"><img');\nbuf.push(attrs({ 'src':(image), \"class\": ('media-object') + ' ' + ('pull-left') }, {\"src\":true}));\nbuf.push('/><h3 class=\"media-body\">');\nvar __val__ = title\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</h3>');\nif ( content)\n{\nbuf.push('<p class=\"clearfix\">');\nvar __val__ = content\nbuf.push(null == __val__ ? \"\" : __val__);\nbuf.push('</p>');\n}\nbuf.push('</div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<h1>Bienvenue sur L\\'application SemSearch.</h1><p class=\"status\">Veuillez patientez quelques instants.\\nL\\'analyseur est en train de lier vos données.</p><h2>Examples de requêtes</h2><ul class=\"samples\">');\n text = \"Qui ai-je appelé en mars ?\"\nbuf.push('<li><a');\nbuf.push(attrs({ 'href':(\"#search/\" + encodeURIComponent(text)) }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = '\"' + text + '\"'\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li>');\n text = \"Quand ai-je reçu un virement de XXXX ?\"\nbuf.push('<li><a');\nbuf.push(attrs({ 'href':(\"#search/\" + encodeURIComponent(text)) }, {\"href\":true}));\nbuf.push('>');\nvar __val__ = '\"' + text + '\"'\nbuf.push(escape(null == __val__ ? \"\" : __val__));\nbuf.push('</a></li></ul>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"container\"><div class=\"navbar-header\"><button type=\"button\" data-toggle=\"collapse\" data-target=\".navbar-collapse\" class=\"navbar-toggle\"><span class=\"icon-bar\"></span><span class=\"icon-bar\"></span><span class=\"icon-bar\"></span></button><a href=\"#\" class=\"navbar-brand\">SemSearch</a></div><div class=\"navbar-collapse collapse\"><form role=\"search\" ng-controller=\"SearchCtrl\" class=\"navbar-form navbar-left\"><input type=\"text\" placeholder=\"Rechercher\" class=\"input-large form-control\"/></form></div></div>');\n}\nreturn buf.join(\"\");\n};","var BaseView, CardView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = CardView = (function(_super) {\n  __extends(CardView, _super);\n\n  function CardView() {\n    _ref = CardView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  CardView.prototype.tagName = 'a';\n\n  CardView.prototype.className = 'card';\n\n  CardView.prototype.template = require('../templates/card');\n\n  CardView.prototype.events = {\n    'click ': 'toggleSelected'\n  };\n\n  CardView.prototype.getRenderData = function() {\n    return _.extend({\n      title: '',\n      content: ''\n    }, this.model.getSummary());\n  };\n\n  CardView.prototype.toggleSelected = function(event) {\n    return this.$el.toggleClass('selected');\n  };\n\n  CardView.prototype.centerPos = function() {\n    var left, top, _ref1;\n\n    _ref1 = this.$el.position(), left = _ref1.left, top = _ref1.top;\n    left += this.$el.width() / 2;\n    top += this.$el.height() / 2;\n    return {\n      left: left,\n      top: top\n    };\n  };\n\n  return CardView;\n\n})(BaseView);\n","var BaseView, HomeView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = HomeView = (function(_super) {\n  __extends(HomeView, _super);\n\n  function HomeView() {\n    _ref = HomeView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  HomeView.prototype.className = 'jumbotron';\n\n  HomeView.prototype.template = require('../templates/home');\n\n  return HomeView;\n\n})(BaseView);\n","var BaseView, FolderView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = FolderView = (function(_super) {\n  __extends(FolderView, _super);\n\n  function FolderView() {\n    _ref = FolderView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  FolderView.prototype.className = 'navbar navbar-inverse navbar-fixed-top';\n\n  FolderView.prototype.template = require('../templates/search');\n\n  FolderView.prototype.setContent = function(text) {\n    return this.$('input').val(text);\n  };\n\n  return FolderView;\n\n})(BaseView);\n","var SearchCollection, SearchResults, ViewCollection, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nViewCollection = require('../lib/view_collection');\n\nSearchCollection = require('../collections/search_results');\n\nmodule.exports = SearchResults = (function(_super) {\n  __extends(SearchResults, _super);\n\n  function SearchResults() {\n    _ref = SearchResults.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  SearchResults.prototype.id = 'result-view';\n\n  SearchResults.prototype.className = 'container-fluid';\n\n  SearchResults.prototype.counter = 0;\n\n  SearchResults.prototype.itemview = require('./card');\n\n  SearchResults.prototype.initialize = function(options) {\n    this.collection = new SearchCollection([], options);\n    this.lines = this.createSVG('svg', {});\n    return SearchResults.__super__.initialize.apply(this, arguments);\n  };\n\n  SearchResults.prototype.createSVG = function(tagName, attr) {\n    var elem;\n\n    elem = window.document.createElementNS('http://www.w3.org/2000/svg', tagName);\n    return $(elem).attr(attr);\n  };\n\n  SearchResults.prototype.appendView = function(view) {\n    var link, linkTo, lt, me, _i, _len, _ref1, _results;\n\n    view.$el.css({\n      top: 50 + 10 * this.counter++,\n      left: 350 * this.counter\n    });\n    SearchResults.__super__.appendView.apply(this, arguments);\n    _ref1 = this.collection.links;\n    _results = [];\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      link = _ref1[_i];\n      linkTo = view.model.cid === link.s ? this.views[link.o] : view.model.cid === link.o ? linkTo = this.views[link.s] : null;\n      if (linkTo) {\n        me = view.centerPos();\n        lt = linkTo.centerPos();\n        _results.push(this.lines.append(this.createSVG('line', {\n          x1: me.left,\n          y1: me.top,\n          x2: lt.left,\n          y2: lt.top,\n          style: 'stroke:#ddd;stroke-width:2'\n        })));\n      } else {\n        _results.push(void 0);\n      }\n    }\n    return _results;\n  };\n\n  SearchResults.prototype.afterRender = function() {\n    SearchResults.__super__.afterRender.apply(this, arguments);\n    this.$el.height($('body').height());\n    return this.$el.append(this.lines.attr({\n      width: this.$el.width(),\n      height: this.$el.height()\n    }));\n  };\n\n  return SearchResults;\n\n})(ViewCollection);\n"]}